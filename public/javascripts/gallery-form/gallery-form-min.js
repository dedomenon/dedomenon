YUI.add("gallery-form",function(C){function I(){I.superclass.constructor.apply(this,arguments);}C.mix(I,{NAME:"form",ATTRS:{method:{value:"post",validator:function(N){return this._validateMethod(N);},setter:function(N){return N.toLowerCase();}},action:{value:"",validator:C.Lang.isString},fields:{writeOnce:true,validator:function(N){return this._validateFields(N);},setter:function(N){return this._setFields(N);}},inlineValidation:{value:false,validator:C.Lang.isBoolean},resetAfterSubmit:{value:true,validator:C.Lang.isBoolean},skipValidationBeforeSubmit:{value:false,validator:C.Lang.isBoolean},upload:{value:false,validator:C.Lang.isBoolean}},HTML_PARSER:{action:function(N){return this._parseAction(N);},method:function(N){return this._parseMethod(N);},fields:function(N){return this._parseFields(N);}},FORM_TEMPLATE:"<form></form>"});C.extend(I,C.Widget,{_formNode:null,_ioIds:null,_firstField:null,_validateMethod:function(N){if(!C.Lang.isString(N)){return false;}if(N.toLowerCase()!="get"&&N.toLowerCase()!="post"){return false;}return true;},_validateFields:function(O){if(!C.Lang.isArray(O)){return false;}var N=true;C.Array.each(O,function(R,Q,P){if((!R instanceof C.FormField)||(!C.Lang.isObject(R))){N=false;}});return N;},_setFields:function(P){P=P||[];var N,O;C.Array.each(P,function(S,R,Q){if(!S._classes){O=S.type;if(C.Lang.isFunction(O)){N=O;}else{if(O=="hidden"){N=C.HiddenField;}else{if(O=="checkbox"){N=C.CheckboxField;}else{if(O=="password"){N=C.PasswordField;}else{if(O=="textarea"){N=C.TextareaField;}else{if(O=="select"){N=C.SelectField;}else{if(O=="choice"){N=C.ChoiceField;}else{if(O=="button"||O=="submit"||O=="reset"){N=C.Button;if(O=="submit"){S.onclick={fn:this.submit,scope:this};}else{if(O=="reset"){S.onclick={fn:this.reset,scope:this};}}}else{N=C.TextField;}}}}}}}}P[R]=new N(S);if(S.type!="hidden"&&this._firstField===null){this._firstField=P[R];}}else{if(S._nodeType!="hidden"&&this._firstField===null){this._firstField=S;}}},this);return P;},focus:function(){this._firstField._fieldNode.focus();},_parseAction:function(N){var O=N.one("form");if(O){return O.get("action");}},_parseMethod:function(N){var O=N.one("form");if(O){return O.get("method");}},_parseFields:function(N){var O=N.all("*"),Q=N.all("label"),P=[];O.each(function(T,S,R){var X=T.get("nodeName"),V=T.get("id"),U,W=[];if(X=="INPUT"){U={type:T.get("type"),name:T.get("name"),value:T.get("value")};if(U.type=="submit"||U.type=="reset"||U.type=="button"){U.label=T.get("value");}}else{if(X=="BUTTON"){U={type:"button",name:T.get("name"),label:T.get("innerHTML")};}else{if(X=="SELECT"){T.all("option").each(function(Y,a,Z){W.push({label:Y.get("innerHTML"),value:Y.get("value")});});U={type:"select",name:T.get("name"),choices:W};}else{if(X=="TEXTAREA"){U={type:"textarea",name:T.get("name"),value:T.get("innerHTML")};}}}}if(U){if(V){U.id=V;Q.some(function(Y,a,Z){if(Y.get("htmlFor")==V){U.label=Y.get("innerHTML");}});}P.push(U);}T.remove();});return P;},_renderFormNode:function(){var N=this.get("contentBox"),O=N.query("form");if(!O){O=C.Node.create(I.FORM_TEMPLATE);if(this.get("upload")){O.setAttribute("enctype","multipart/form-data");}N.appendChild(O);}this._formNode=O;},_renderFormFields:function(){var N=this.get("fields");C.Array.each(N,function(Q,P,O){Q.render(this._formNode);},this);},_syncFormAttributes:function(){this._formNode.setAttrs({action:this.get("action"),method:this.get("method"),id:this.get("id")});},_runValidation:function(){var N=this.get("fields"),O=true;C.Array.each(N,function(R,Q,P){R.set("error",null);if(R.validateField()===false){O=false;}});return O;},_enableInlineValidation:function(){var N=this.get("fields");C.Array.each(N,function(Q,P,O){Q.set("validateInline",true);});},_disableInlineValidation:function(){var N=this.get("fields");C.Array.each(N,function(Q,P,O){Q.set("validateInline",false);});},_handleIOSuccess:function(N,O){if(typeof this._ioIds[N]!="undefined"){delete this._ioIds[N];this.fire("success",{response:O});}},_handleIOComplete:function(N,O){if(typeof this._ioIds[N]!="undefined"){if(this.get("upload")){delete this._ioIds[N];}this.fire("complete",{response:O});}},_handleIOFailure:function(N,O){if(typeof this._ioIds[N]!="undefined"){this.fire("failure",{response:O});delete this._ioIds[N];}},reset:function(){this._formNode.reset();var N=this.get("fields");C.Array.each(N,function(Q,P,O){Q.clear();});},submit:function(){if(this.get("skipValidationBeforeSubmit")||this._runValidation()){var P=this.get("action"),O=this.get("method"),Q,N;N={method:O,form:{id:this._formNode,upload:this.get("upload"),useDisabled:true}};Q=C.io(P,N);this._ioIds[Q.id]=Q;}},getField:function(N){var P=this.get("fields"),O;if(C.Lang.isNumber(N)){return P[N];}else{if(C.Lang.isString(N)){C.Array.each(P,function(S,R,Q){if(S.get("name")==N){O=S;}});return O;}}},initializer:function(N){this._ioIds={};this.publish("submit");this.publish("reset");this.publish("success");this.publish("complete");this.publish("failure");},destructor:function(){this._formNode=null;},renderUI:function(){this._renderFormNode();this._renderFormFields();},bindUI:function(){this._formNode.on("submit",C.bind(function(N){N.halt();},this));this.after("inlineValidationChange",C.bind(function(N){if(N.newValue===true){this._enableInlineValidation();}else{this._disableInlineValidation();}},this));this.after("success",C.bind(function(N){if(this.get("resetAfterSubmit")){this.reset();}},this));C.on("io:success",C.bind(this._handleIOSuccess,this));C.on("io:complete",C.bind(this._handleIOComplete,this));C.on("io:failure",C.bind(this._handleIOFailure,this));},syncUI:function(){this._syncFormAttributes();if(this.get("inlineValidation")===true){this._enableInlineValidation();}}});C.Form=I;function L(){L.superclass.constructor.apply(this,arguments);}C.mix(L,{NAME:"form-field",ATTRS:{id:{value:C.guid(),validator:C.Lang.isString,writeOnce:true},name:{validator:C.Lang.isString,writeOnce:true},value:{value:"",validator:C.Lang.isString},label:{value:"",validator:C.Lang.isString},validator:{value:function(N){return true;
},validator:function(N){return this._validateValidator(N);},setter:function(N){return this._setValidator(N);}},error:{value:false,validator:function(N){return this._validateError(N);}},required:{value:false,validator:C.Lang.isBoolean},validateInline:{value:false,validator:C.Lang.isBoolean}},tabIndex:0,VALIDATE_EMAIL_ADDRESS:function(P,O){var N=/^([\w]+(?:\.[\w]+)*)@((?:[\w]+\.)*\w[\w]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(N.test(P)===false){O.set("error",L.INVALID_EMAIL_MESSAGE);return false;}return true;},INVALID_EMAIL_MESSAGE:"Please enter a valid email address",VALIDATE_PHONE_NUMBER:function(P,O){var N=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;if(N.test(P)===false){O.set("error",L.INVALID_PHONE_NUMBER);return false;}return true;},INVALID_PHONE_NUMBER:"Please enter a valid phone number",VALIDATE_IP_ADDRESS:function(R,Q){var O=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,N,P=true;if(O.test(R)===false){P=false;}N=R.split(".");C.Array.each(N,function(T,U,S){var V=parseInt(T,10);if(V<0||V>255){P=false;}});if(P===false){Q.set("error",L.INVALID_IP_MESSAGE);}return P;},INVALID_IP_MESSAGE:"Please enter a valid IP address",VALIDATE_DATE:function(P,O){var N=/^([1-9]|1[0-2])(\-|\/)([0-2][0-9]|3[0-1])(\-|\/)(\d{4}|\d{2})$/;if(N.test(P)===false){O.set("error",L.INVALID_DATE_MESSAGE);return false;}return true;},INVALID_DATE_MESSAGE:"Please enter a a valid date",VALIDATE_TIME:function(P,O){var N=/^([1-9]|1[0-2]):[0-5]\d(:[0-5]\d(\.\d{1,3})?)?$/;if(N.test(P)===false){O.set("error",L.INVALID_TIME_MESSAGE);return false;}return true;},INVALID_TIME_MESSAGE:"Please enter a valid time",VALIDATE_POSTAL_CODE:function(Q,P){var N,O=true;if(Q.length==6||Q.length==7){N=/^[a-zA-Z]\d[a-zA-Z](-|\s)?\d[a-zA-Z]\d$/;}else{if(Q.length==5||Q.length==10){N=/^\d{5}((-|\s)\d{4})?$/;}else{if(Q.length>0){O=false;}}}if(O===false||(N&&N.test(Q)===false)){P.set("error",L.INVALID_POSTAL_CODE_MESSAGE);return false;}return true;},INVALID_POSTAL_CODE_MESSAGE:"Please enter a valid postal code",VALIDATE_NO_SPECIAL_CHARS:function(P,O){var N=/^[a-zA-Z0-9]*$/;if(N.test(P)===false){O.set("error",L.INVALID_SPECIAL_CHARS);return false;}return true;},INVALID_SPECIAL_CHARS:"Please use only letters and numbers",INPUT_TEMPLATE:"<input>",TEXTAREA_TEMPLATE:"<textarea></textarea>",LABEL_TEMPLATE:"<label></label>",SELECT_TEMPLATE:"<select></select>"});C.extend(L,C.Widget,{_labelNode:null,_fieldNode:null,_errorNode:null,_nodeType:"text",_validateError:function(N){if(C.Lang.isString(N)){return true;}if(N===null||typeof N=="undefined"){return true;}return false;},_validateValidator:function(O){if(C.Lang.isString(O)){var N=/^(email|phone|ip|date|time|postal|special)$/;if(N.test(O)===true){return true;}}if(C.Lang.isFunction(O)){return true;}return false;},_setValidator:function(N){if(N=="email"){return L.VALIDATE_EMAIL_ADDRESS;}else{if(N=="phone"){return L.VALIDATE_PHONE_NUMBER;}else{if(N=="ip"){return L.VALIDATE_IP_ADDRESS;}else{if(N=="date"){return L.VALIDATE_DATE;}else{if(N=="time"){return L.VALIDATE_TIME;}else{if(N=="postal"){return L.VALIDATE_POSTAL_CODE;}else{if(N=="special"){return L.VALIDATE_NO_SPECIAL_CHARS;}}}}}}}return N;},_renderLabelNode:function(){var N=this.get("contentBox"),O=N.query("label");if(!O||O.get("for")!=this.get("id")){O=C.Node.create(L.LABEL_TEMPLATE);N.appendChild(O);}this._labelNode=O;},_renderFieldNode:function(){var N=this.get("contentBox"),O=N.query("#"+this.get("id"));if(!O){O=C.Node.create(L.INPUT_TEMPLATE);N.appendChild(O);}this._fieldNode=O;},_syncLabelNode:function(){if(this._labelNode){this._labelNode.setAttrs({innerHTML:this.get("label")});this._labelNode.setAttribute("for",this.get("id"));}},_syncFieldNode:function(){this._fieldNode.setAttrs({name:this.get("name"),type:this._nodeType,id:this.get("id"),value:this.get("value")});this._fieldNode.setAttribute("tabindex",L.tabIndex);L.tabIndex++;},_syncError:function(){var N=this.get("error");if(N){this._showError(N);}},_checkRequired:function(){if(this.get("required")===true&&this.get("value").length===0){return false;}return true;},_showError:function(O){var N=this.get("contentBox"),P=C.Node.create("<span>"+O+"</span>");P.addClass("error");N.insertBefore(P,this._labelNode);this._errorNode=P;},_clearError:function(){if(this._errorNode){var N=this.get("contentBox");N.removeChild(this._errorNode);this._errorNode=null;}},_enableInlineValidation:function(){this.after("valueChange",C.bind(this.validateField,this));},_disableInlineValidation:function(){this.detach("valueChange",this.validateField,this);},validateField:function(P){var O=this.get("value"),N=this.get("validator");this.set("error",null);if(P&&P.src!="ui"){return false;}if(!this._checkRequired()){this.set("error","This field is required");return false;}return N.call(this,O,this);},clear:function(){this.set("value",this.init_value);this._fieldNode.set("value",this.init_value);this.fire("clear",this);},initializer:function(){this.publish("blur");this.publish("change");this.publish("focus");this.publish("clear");this.init_value=this.get("value");},destructor:function(N){},renderUI:function(){this._renderLabelNode();this._renderFieldNode();},bindUI:function(){this._fieldNode.on("change",C.bind(function(N){this.set("value",this._fieldNode.get("value"),{src:"ui"});this.fire("change",N);},this));this.on("valueChange",C.bind(function(N){if(N.src!="ui"){this._fieldNode.set("value",N.newVal);}},this));this._fieldNode.on("blur",C.bind(function(N){this.set("value",this._fieldNode.get("value"),{src:"ui"});this.fire("blur",N);},this));this._fieldNode.on("focus",C.bind(function(N){this.fire("focus",N);},this));this.on("errorChange",C.bind(function(N){if(N.newVal){this._showError(N.newVal);}else{this._clearError();}},this));this.on("validateInlineChange",C.bind(function(N){if(N.newVal===true){this._enableInlineValidation();}else{this._disableInlineValidation();}},this));},syncUI:function(){this.get("boundingBox").removeAttribute("tabindex");this._syncLabelNode();
this._syncFieldNode();this._syncError();if(this.get("validateInline")===true){this._enableInlineValidation();}}});C.FormField=L;function H(){H.superclass.constructor.apply(this,arguments);}C.mix(H,{NAME:"text-field"});C.extend(H,C.FormField,{_nodeType:"text"});C.TextField=H;function A(){A.superclass.constructor.apply(this,arguments);}C.mix(A,{NAME:"password-field"});C.extend(A,C.FormField,{_nodeType:"password"});C.PasswordField=A;function D(){D.superclass.constructor.apply(this,arguments);}C.mix(D,{NAME:"checkbox-field"});C.extend(D,C.FormField,{_nodeType:"checkbox",_getValue:function(O,N){if(this._fieldNode.get("checked")===true){return O;}else{return"";}},initializer:function(){D.superclass.initializer.apply(this,arguments);this.modifyAttr("value",{getter:function(O,N){return this._getValue(O,N);},writeOnce:true});}});C.CheckboxField=D;function M(){M.superclass.constructor.apply(this,arguments);}C.mix(M,{NAME:"hidden-field",ATTRS:{displayValue:{value:false,writeOnce:true,validator:C.Lang.isBoolean}}});C.extend(M,C.FormField,{_nodeType:"hidden",_valueDisplayNode:null,_renderValueDisplayNode:function(){if(this.get("displayValue")===true){var O=C.Node.create("<div></div>"),N=this.get("contentBox");N.appendChild(O);this._valueDisplayNode=O;}},renderUI:function(){M.superclass.renderUI.apply(this,arguments);this._renderValueDisplayNode();},bindUI:function(){M.superclass.bindUI.apply(this,arguments);if(this.get("displayValue")===true){this.after("valueChange",C.bind(function(N,O){this._valueDisplayNode.set("innerHTML",O.newVal);},this,true));}}});C.HiddenField=M;function E(){E.superclass.constructor.apply(this,arguments);}C.mix(E,{NAME:"textarea-field",NODE_TEMPLATE:"<textarea></textarea>"});C.extend(E,C.FormField,{_renderFieldNode:function(){var N=this.get("contentBox"),O=N.query("#"+this.get("id"));if(!O){O=C.Node.create(C.substitute(E.NODE_TEMPLATE,{name:this.get("name"),type:"text",id:this.get("id"),value:this.get("value")}));N.appendChild(O);}O.setAttribute("tabindex",C.FormField.tabIndex);C.FormField.tabIndex++;this._fieldNode=O;}});C.TextareaField=E;function K(){K.superclass.constructor.apply(this,arguments);}C.mix(K,{NAME:"choice-field",ATTRS:{choices:{validator:function(N){return this._validateChoices(N);}},multiple:{validator:C.Lang.isBoolean,value:false}}});C.extend(K,C.FormField,{_validateChoices:function(O){if(!C.Lang.isArray(O)){return false;}var N=true;C.Array.each(O,function(R,Q,P){if(!C.Lang.isObject(R)){N=false;return;}if(!R.label||!C.Lang.isString(R.label)||!R.value||!C.Lang.isString(R.value)){N=false;return;}});return N;},_renderFieldNode:function(){var O=this.get("contentBox"),Q=this.get("choices"),P,N;C.Array.each(Q,function(T,S,R){P=C.Node.create(L.LABEL_TEMPLATE);O.appendChild(P);N=C.Node.create(L.INPUT_TEMPLATE);O.appendChild(N);});this._fieldNode=O.all("input");},_syncFieldNode:function(){var Q=this.get("choices"),N=this.get("contentBox"),P=N.all("label"),O=(this.get("multiple")===true?"checkbox":"radio");P.each(function(S,R,T){S.setAttrs({innerHTML:Q[R].label});S.setAttribute("for",(this.get("id")+"_choice"+R));},this);this._fieldNode.each(function(T,R,U){T.setAttrs({value:Q[R].value,id:(this.get("id")+"_choice"+R),name:this.get("name"),type:O});var S=C.Node.getDOMNode(T);S.value=Q[R].value;},this);},clear:function(){this._fieldNode.each(function(O,N,P){O.setAttribute("checked",false);},this);this.set("value","");},bindUI:function(){this._fieldNode.on("change",C.bind(function(N){this._fieldNode.each(function(P,O,Q){if(P.get("checked")===true){this.set("value",P.get("value"));}},this);},this));}});C.ChoiceField=K;function B(){B.superclass.constructor.apply(this,arguments);}C.mix(B,{NAME:"select-field",NODE_TEMPLATE:"<select></select>",OPTION_TEMPLATE:"<option></option>"});C.extend(B,C.ChoiceField,{_renderFieldNode:function(){var N=this.get("contentBox"),O=N.query("#"+this.get("id"));if(!O){O=C.Node.create(B.NODE_TEMPLATE);N.appendChild(O);}this._fieldNode=O;this._renderOptionNodes();},_renderOptionNodes:function(){var O=this.get("choices"),N;N=C.Node.create(B.OPTION_TEMPLATE);this._fieldNode.appendChild(N);C.Array.each(O,function(R,Q,P){N=C.Node.create(B.OPTION_TEMPLATE);this._fieldNode.appendChild(N);},this);},_syncFieldNode:function(){this._fieldNode.setAttrs({name:this.get("name"),id:this.get("id"),multiple:(this.get("multiple")===true?"multiple":"")});},_syncOptionNodes:function(){var P=this.get("choices"),N=this.get("contentBox"),O=N.all("option");O.each(function(T,S,R){var Q=(S===0?"Choose one":P[S-1].label),U=(S===0?"":P[S-1].value);T.setAttrs({innerHTML:Q,value:U});},this);},clear:function(){this._fieldNode.value="";},bindUI:function(){B.superclass.constructor.superclass.bindUI.apply(this,arguments);},syncUI:function(){B.superclass.syncUI.apply(this,arguments);this._syncOptionNodes();}});C.SelectField=B;function G(){G.superclass.constructor.apply(this,arguments);}C.mix(G,{NAME:"button",HTML_PARSER:{},ATTRS:{onclick:{validator:function(N){if(C.Lang.isObject(N)===false){return false;}if(typeof N.fn=="undefined"||C.Lang.isFunction(N.fn)===false){return false;}return true;},value:{fn:function(N){}},setter:function(N){N.scope=N.scope||this;N.argument=N.argument||{};return N;}}},NODE_TEMPLATE:"<button></button>"});C.extend(G,C.FormField,{_renderButtonNode:function(){var N=this.get("contentBox"),O;O=C.Node.create(G.NODE_TEMPLATE);N.appendChild(O);this._fieldNode=O;},_syncLabelNode:function(){},_syncFieldNode:function(){this._fieldNode.setAttrs({innerHTML:this.get("label"),id:this.get("id")});},_setClickHandler:function(){if(!this._fieldNode){return;}var N=this.get("onclick");C.Event.purgeElement(this._fieldNode,true,"click");C.on("click",C.bind(N.fn,N.scope,true),this._fieldNode);},renderUI:function(){this._renderButtonNode();},bindUI:function(){this.after("onclickChange",C.bind(this._setClickHandler,this,true));this._setClickHandler();}});C.Button=G;function J(){J.superclass.constructor.apply(this,arguments);}C.mix(J,{NAME:"file-field",INPUT_TEMPLATE:'<input type="file"/>'});
C.extend(J,C.FormField,{_nodeType:"file",_renderFieldNode:function(){var N=this.get("contentBox"),O=N.query("#"+this.get("id"));if(!O){O=C.Node.create(J.INPUT_TEMPLATE);N.appendChild(O);}this._fieldNode=O;}});C.FileField=J;function F(){F.superclass.constructor.apply(this,arguments);}C.mix(F,{NAME:"madb-file-field",DELETE_ICON_TEMPLATE:'<img class="action_cell" src="/images/icon/big/delete.png" alt="delete_file"/>',REPLACE_ICON_TRANSFER_ALLOWED:'<img class="action_cell" src="/images/icon/big/edit.png" alt="replace_file"/>',REPLACE_ICON_TRANSFER_REFUSED:'<img src="/images/icon/big/error.png" alt="quota_reached"></img>',UNDO_REPLACE_ICON:'<img src="/images/icon/big/undo.png" alt="undo_replace_file" />',FILE_FIELD_TEMPLATE:'<input type="file"></input>',HIDDEN_FIELD_TEMPLATE:'<input type="hidden"></input>',ATTRS:{transferAllowed:{value:true,validator:C.Lang.isBoolean},deleteURL:{value:"",validator:C.Lang.isString},detailValueId:{value:"",validator:C.Lang.isString},localizedStrings:{value:{},validator:C.Lang.isObject}}});C.extend(F,C.FormField,{_nodeType:"file",_replaceIconNode:null,_deleteIconNode:null,_fileField:null,_fieldContainer:null,_replaceIconTemplate:function(){if(this.get("transferAllowed")){return F.REPLACE_ICON_TRANSFER_ALLOWED;}else{return F.REPLACE_ICON_TRANSFER_REFUSED;}},_initializeContainer:function(){this._fieldContainer.set("innerHTML",this.init_value);this._fieldContainer.appendChild(this._deleteIconNode);this._fieldContainer.appendChild(this._replaceIconNode);},_renderFieldNode:function(){var N=this.get("contentBox"),O=N.query("#"+this.get("id"));if(this.get("value")===""){F.superclass._renderFieldNode.apply(this,arguments);this._hiddenFieldNode=C.Node.create(F.HIDDEN_FIELD_TEMPLATE);N.appendChild(this._hiddenFieldNode);}else{if(!O){this._hiddenFieldNode=C.Node.create(F.HIDDEN_FIELD_TEMPLATE);this._fieldContainer=C.Node.create("<div></div>");this._deleteIconNode=C.Node.create(F.DELETE_ICON_TEMPLATE);this._undoReplaceIconNode=C.Node.create(F.UNDO_REPLACE_ICON);this._replaceIconNode=C.Node.create(this._replaceIconTemplate());this._initializeContainer();N.appendChild(this._fieldContainer);this._fieldNode=C.Node.create(F.FILE_FIELD_TEMPLATE);}}},_displayFileField:function(){this._fieldContainer.set("innerHTML","");this._fieldContainer.appendChild(this._fieldNode);this._fieldContainer.appendChild(this._hiddenFieldNode);if(this._hiddenFieldNode.getAttribute("value")!==""){this._fieldContainer.appendChild(this._undoReplaceIconNode);}},_handleDeleteClick:function(){if(confirm(this.get("localizedStrings").delete_file_confirmation)){var P={success:function(Q){this._hiddenFieldNode.setAttribute("value","");this._displayFileField();},failure:function(Q){alert(Q.responseText);}};var N={method:"POST",context:this,on:P};var O=this.get("deleteURL");C.io(O,N);}},_handleReplaceClick:function(){this._displayFileField();},_handleUndoReplaceClick:function(){this._initializeContainer();},bindUI:function(){F.superclass.bindUI.apply(this,arguments);if(this.get("value")!==""){this._deleteIconNode.on("click",C.bind(function(N){this._handleDeleteClick();},this));this._replaceIconNode.on("click",C.bind(function(N){this._handleReplaceClick();},this));this._undoReplaceIconNode.on("click",C.bind(function(N){this._handleUndoReplaceClick();},this));}},_syncFieldNode:function(){this._fieldNode.setAttrs({name:this.get("name")+"[value]",type:this._nodeType,id:this.get("id")+"_value"});this._hiddenFieldNode.setAttrs({name:this.get("name")+"[id]",id:this.get("id")+"_id",value:this.get("detailValueId")});this._fieldNode.setAttribute("tabindex",L.tabIndex);L.tabIndex++;}});C.MadbFileField=F;},"@VERSION@",{requires:["node","widget","io-base"]});